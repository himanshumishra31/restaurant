<%= javascript_include_tag 'jquery_nested_form' %>
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="panel login-form">
      <div class="panel-heading text-center text-uppercase">
        <h3><strong>Enter Meal Details</strong></h3>
      </div>
      <div class="panel-body">
        <%= nested_form_for [:admin, @meal], html: { class: 'form-horizontal'} do |form| %>
          <div class="form-group">
            <div class="col-sm-12 form-label-group" data-id="form-label-group">
              <%= form.label :name, 'Enter Meal name', class: "control-label", :'data-id'=>"control-label" %>
              <%= form.text_field :name, size: 40, class: 'form-control form-control-input', :'data-id'=>"form-control-input" %>
              <%= display_error(:name, @meal) %>
            </div>
          </div>
          <div class="form-group">
            <%= form.label :active %>
            <%= form.check_box :active %>
            <%= display_error(:active, @meal) %>
          </div>
          <div class="form-group">
            <div class="col-sm-12 form-label-group" data-id="form-label-group">
              <%= form.label :image, 'Browse image', class: "control-label", :'data-id'=>"control-label" %>
              <%= form.file_field :image, size: 40, class: 'form-control form-control-input', :'data-id'=>"form-control-input" %>
            </div>
          </div>
          <div class="form-group">
            <%= display_error(:meal_items, @meal) %>
            <%= form.fields_for :meal_items do |meal_item| %>
              <%= meal_item.link_to_remove 'remove' %>
              <div class="form-group">
                <%= meal_item.select :ingredient_id, Ingredient.pluck(:name, :id), prompt: 'Select an ingredient'%>
                <%= meal_item.number_field :quantity %>
                <%= display_error(:"meal_items.quantity", @meal) %>
              </div>
            <% end %>
            <div class="col-lg-10">
             <%= form.link_to_add "Add an Ingredient", :meal_items %>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <%= form.submit 'Continue', class: 'btn btn-danger btn-site-primary btn-lg btn-block text-uppercase' %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
